---
title: "Soil Effects on Presence/Absence Analysis"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 

```{r}
plot(cars)
```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file). 

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

```{r}
data2009 <-read.csv("2009.Data.Entry.Copy.csv", header=TRUE, sep=",", stringsAsFactors = FALSE)
str(data2009)
data2018 <-read.csv("2018.Data.Entry.Copy.csv", header = TRUE, sep = ",",stringsAsFactors = FALSE)
str(data2018)

```
pulled in both data sets of data from csv files 
```{r}
d18<-data2018$SiteName[data2018$SiteName=="Naimen"]<-"Naiman"

```
renamed the variable Naimen to Naiman to match 2009 data and created a new dataframe with manipulated data
```{r}
d09<-rename(data2009,Transect = SiteCode)
```
renamed sitecode to transect in 2009 data to match 2018 and created a new dataframe with manipulated 
```{r}
install.packages("reshape")
d09pc <- cast(d09,SiteName + PlotNumber ~ Species_Code, value='Cover', FUN=mean)

```
installed reshape package and casted data by species type and site code. Used cover as value to track basic presence/absence for 2009 data
```{r}
library(dplyr)
d18<-rename(data2018,Species_Code = SpeciesCode)
```
reloaded dplyr pakage, and renamed SpeciesCode to match d09 
```{r}
d18pc <- cast(d18,SiteName + PlotNumber ~ Species_Code, value='Cover', FUN=mean)
```
performed same cast function for d18 to obtain presence absence 
```{r}
library(dplyr)
d18<-rename(data2018,Species_Code = SpeciesCode)
d18pc <- cast(d18,SiteName + PlotNumber ~ Species_Code, value='Cover', FUN=mean)
```
load dplyr package, created new data frame for manipulation of data called d18. Casted d18 into d18pc for presence/absence. 
```{r}
statsd09 <- d09 %>% group_by(SiteName) %>% group_by(Species_Code) %>% summarize(avg = mean(Cover))
statsd18 <- d18 %>% group_by(SiteName) %>% group_by(Species_Code) %>% summarize(avg = mean(Cover))
View(statsd09)
View(statsd18)
```
Created new data frame that contains the summary cover statistics of mean cover for each species within 2009 data 
repeated the same steps for 2018 data. Used View function to confirm data has been subsetted in the way that I wanted
```{r}
summd09pa<- cast(statsd09,~Species_Code, value='avg', FUN=mean)
summd18pa<- cast(statsd09,~Species_Code, value='avg', FUN=mean)
```
cast summary data to view the species cover by average 
```{r}
d09pc <- as.data.frame(d09pc)
d18pc <- as.data.frame(d18pc)
```
changing both casts from 2009 and 2018 to data frames so that NA values can be converted into 0
```{r}
d09pc[is.na(d09pc)] <- 0
d18pc[is.na(d18pc)] <- 0
```
changed NA to 0
```{r}
d09pc.matrix <- as.matrix.cast_df(d09pc)
d18pc.matrix <- as.matrix.cast_df(d18pc)
```
casted to a matrix 
```{r}

```

